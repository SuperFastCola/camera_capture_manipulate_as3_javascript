package  {		import flash.display.MovieClip;	import flash.events.Event;	import fl.transitions.Tween; 	import fl.transitions.easing.*; 		import ExternalImage;		public class CameraLoader extends MovieClip {				var externalClip:MovieClip;		var cameraClip:MovieClip;		var loadCounter:Loading;		var sizeArray:Array;		var aniTween:Tween		public function CameraLoader() {			// constructor code			sizeArray = new Array(stage.stageWidth,stage.stageHeight);			loadCounter = new Loading();									externalClip = new ExternalImage("camera_test_as_class.swf",sizeArray);			addChild(externalClip);						loadCounter = new Loading();			loadCounter.x = stage.stageWidth/2;			loadCounter.y = stage.stageHeight/2;			loadCounter.percentage.text = "0%";			loadCounter.alpha = 0;			loadCounter.addEventListener(Event.ADDED, function(){										 	animateLoader(0,1,1);										 });			addChild(loadCounter);			this.addEventListener(Event.ENTER_FRAME, getLoadedAmount);					}				private function animateLoader(s:Number,e:Number,t:Number):void{			//http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html			if(aniTween!=null){				aniTween.stop();			}			aniTween = new Tween(loadCounter, "alpha", Elastic.easeOut, s, e, t, true);			aniTween.start();		}				private function getLoadedAmount(e:Event){			if(!isNaN(externalClip.getProgress())){						loadCounter.percentage.text = externalClip.getProgress() + "%";								if(externalClip.getProgress()>=100){					if(externalClip.outputMovie!=null){												this.removeEventListener(Event.ENTER_FRAME, getLoadedAmount);						cameraClip = externalClip.outputMovie as MovieClip;						cameraClip.addEventListener(Event.ADDED, initializer);						addChild(cameraClip);					}// end if				}			}		}				private function initializer(e:Event){			cameraClip.removeEventListener(Event.ADDED, initializer);			cameraClip.startCamera();			animateLoader(1,0,.5);		}	}	}